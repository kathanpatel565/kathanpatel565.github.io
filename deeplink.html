<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Drivewyze | Redirectingâ€¦</title>
    <meta name="robots" content="noindex, nofollow">
    <script>
      (function () {
        "use strict";

        // Redirect to the appropriate app store based on the platform
        var APPLE_APP_STORE_URL = "https://apps.apple.com/app/id555769428"; // Drivewyze iOS app store
        var GOOGLE_PLAY_STORE_URL = "https://play.google.com/store/apps/details?id=com.drivewyze.agatha2"; // Drivewyze Android app store
        var DRIVEWYZE_HOME_URL = "https://drivewyze.com/solutions/driver/";

        // Get the platform of the device
        function getPlatform() {
          var ua = navigator.userAgent || "";
          var uaData = (navigator.userAgentData && navigator.userAgentData.platform) ? navigator.userAgentData.platform : "";

          var platform = (uaData || ua).toLowerCase();

          // Detect iPadOS 13+ which reports as Mac but is touch-capable
          var isIpadOs = /macintosh/.test(platform) && typeof navigator.maxTouchPoints === "number" && navigator.maxTouchPoints > 1;

          if (/iphone|ipad|ipod/.test(platform) || isIpadOs) return "ios";
          if (/android/.test(platform)) return "android";
          return "other";
        }

        // Navigate to the target URL
        function navigate(url) {
          try {
            window.location.replace(url);
          } catch (e) {
            window.location.href = url;
          }
        }

        function initRedirectFlow() {
          var platform = getPlatform();

          // Fallback timer: if we are still visible after 4s, go to homepage
          var FALLBACK_MS = 4000;
          var fallbackTimer = setTimeout(function () {
            // If we are still visible, the store navigation likely did not complete
            if (document.visibilityState !== "hidden") {
              navigate(DRIVEWYZE_HOME_URL);
            }
          }, FALLBACK_MS);

          // If the page becomes hidden (navigated away or app switch), cancel fallback
          var cancelFallback = function () { try { clearTimeout(fallbackTimer); } catch (_) {} };
          document.addEventListener("visibilitychange", function () {
            // This visibilitychange event is triggered when the page is hidden or shown
            if (document.visibilityState === "hidden") cancelFallback();
          });
          // This pagehide event is triggered when the page is hidden or closed
          window.addEventListener("pagehide", cancelFallback);

          // Decide target store by platform
          var targetUrl = platform === "ios" ? APPLE_APP_STORE_URL : platform === "android" ? GOOGLE_PLAY_STORE_URL : DRIVEWYZE_HOME_URL;
          // Navigate to the target URL
          navigate(targetUrl);
        }

        // Initialize the redirect flow
        initRedirectFlow();
      })();
    </script>
  </head>
  <body>
  </body>
</html>
